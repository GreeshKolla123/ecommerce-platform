import pytest\nfrom fastapi.testclient import TestClient\nfrom app.main import app\nfrom app.routers.auth import create_access_token\n

# create a test client\nclient = TestClient(app)\n\n\n# test the register route\ndef test_register():\n    response = client.post('/api/register', json={'username': 'testuser', 'email': 'testuser@example.com', 'password': 'testpassword'})\n    assert response.status_code == 200\n    assert 'access_token' in response.json()\n\n\n# test the login route\ndef test_login():\n    response = client.post('/api/login', json={'username': 'testuser', 'password': 'testpassword'})\n    assert response.status_code == 200\n    assert 'access_token' in response.json()\n\n\n# test the get user route\ndef test_get_user():\n    token = create_access_token(data={'sub': 1})\n    response = client.get('/api/user', headers={'Authorization': f'Bearer {token}'})\n    assert response.status_code == 200\n    assert response.json()['username'] == 'testuser'