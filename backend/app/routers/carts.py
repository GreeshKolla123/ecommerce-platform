from fastapi import APIRouter, Depends, HTTPException, status\nfrom fastapi.security import OAuth2PasswordBearer\nfrom . import models\nfrom .database import SessionLocal\nfrom .main import get_user\n

# create a router\nrouter = APIRouter()\n\n\n# authenticate token\noauth2_scheme = OAuth2PasswordBearer(tokenUrl="/api/login")\n\n\n# create a cart\nclass Cart(BaseModel):\n    product_id: int\n    quantity: int\n\n\n# add a product to the cart\n@router.post("/api/cart")\nasync def create_cart(cart: Cart, db: SessionLocal = Depends(), user: models.User = Depends(get_user)):\n    db_cart = models.Cart(user_id=user.id, product_id=cart.product_id, quantity=cart.quantity)\n    db.add(db_cart)\n    db.commit()\n    db.refresh(db_cart)\n    return db_cart\n\n\n# get the cart contents\n@router.get("/api/cart")\nasync def read_cart(db: SessionLocal = Depends(), user: models.User = Depends(get_user)):\n    return db.query(models.Cart).filter(models.Cart.user_id == user.id).all()